(this.webpackJsonpforkify=this.webpackJsonpforkify||[]).push([[0],{36:function(e,t,n){e.exports=n(63)},42:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(13),s=n.n(r),c=n(14),l=n(16),o=n(3),p=n.n(o),u=n(6),m=n(7),d=n(9),g=n(8),h=n(10),E=(n(42),n(18)),_=n.n(E),f=function(e){return{type:"SET_RECIPE_INFO",payload:{id:e.id,title:e.title,author:e.author,img:e.img,url:e.url,ingredients:e.ingredients,time:e.time,servings:e.servings}}},v=function(e){return{type:"SET_LIKE_RECIPE",payload:e}},k=n(1),b=Object(k.b)((function(e){return{searchField:e.searchRecipes.searchField}}),{setSearchField:function(e){return{type:"CHANGE_SEARCH_FIELD",payload:e}},requestResult:function(e){return function(t){var n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:"REQUEST_RESULTS_PENDING"}),a.prev=1,a.next=4,p.a.awrap(_.a.get("https://forkify-api.herokuapp.com/api/search?&q=".concat(e)));case 4:n=a.sent,t({type:"REQUEST_RESULTS_SUCCESS",payload:n.data.recipes}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),t({type:"REQUEST_RESULTS_FAILED",payload:a.t0});case 11:case"end":return a.stop()}}),null,null,[[1,8]])}}})((function(e){return i.a.createElement("form",{className:"search",onSubmit:function(t){t.preventDefault(),e.requestResult(e.searchField)}},i.a.createElement("input",{type:"text",className:"search__field",placeholder:"Search over 1,000,000 recipes...",value:e.searchField,onChange:function(t){return e.setSearchField(t.target.value)}}),i.a.createElement("button",{className:"btn search__btn"},i.a.createElement("svg",{className:"search__icon"},i.a.createElement("use",{href:"img/icons.svg#icon-magnifying-glass"})),i.a.createElement("span",null,"Search")))})),R=function(e){return i.a.createElement("li",null,i.a.createElement("a",{className:"likes__link",href:"#".concat(e.item.id),onClick:e.likeItemOnClick},i.a.createElement("figure",{className:"likes__fig"},i.a.createElement("img",{src:e.item.img,alt:e.item.title})),i.a.createElement("div",{className:"likes__data"},i.a.createElement("h4",{className:"likes__name"},e.item.title),i.a.createElement("p",{className:"likes__author"},e.item.author))))},N=Object(k.b)((function(e){return{likedRecipe:e.setLikedRecipe.likedRecipe}}),null)((function(e){return e.isLike?i.a.createElement("div",{className:"likes"},i.a.createElement("div",{className:"likes__field"},i.a.createElement("svg",{className:"likes__icon"},i.a.createElement("use",{href:"img/icons.svg#icon-heart".concat(e.isLike?"":"-outlined")}))),i.a.createElement("div",{className:"likes__panel"},i.a.createElement("ul",{className:"likes__list"},e.likedRecipe.map((function(t){return i.a.createElement(R,{item:t,key:t.id,likeItemOnClick:e.likeItemOnClick})}))))):i.a.createElement("div",null)})),y=function(e){return i.a.createElement("header",{className:"header"},i.a.createElement("img",{src:"./img/logo.png",alt:"Logo",className:"header__logo"}),i.a.createElement(b,null),i.a.createElement(N,{isLike:e.isLike,likeItemOnClick:e.likeItemOnClick}))},S=function(e){var t=e.page,n=e.type,a=e.onPageClick;return i.a.createElement("button",{className:"btn-inline results__btn--".concat(n),"data-goto":"".concat("prev"===n?t-1:t+1),onClick:a},i.a.createElement("svg",{className:"search__icon"},i.a.createElement("use",{href:"img/icons.svg#icon-triangle-".concat("prev"===n?"left":"right")})),i.a.createElement("span",null,"Page ","".concat("prev"===n?t-1:t+1)))},I=function(e){var t=e.page,n=e.numResult,a=e.resPerPage,r=e.onPageClick,s=Math.ceil(n/a);return 1===t&&s>1?i.a.createElement("div",{className:"results__pages"},i.a.createElement(S,{page:t,type:"next",onPageClick:r})):t<s?i.a.createElement("div",{className:"results__pages"},i.a.createElement(S,{page:t,type:"next",onPageClick:r}),i.a.createElement(S,{page:t,type:"prev",onPageClick:r})):t===s&&s>1?i.a.createElement("div",{className:"results__pages"},i.a.createElement(S,{page:t,type:"prev",onPageClick:r})):void 0},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:17,n=[];return e.length>t?(e.split(" ").reduce((function(e,a){return e+a.length<=t&&n.push(a),e+a.length}),0),"".concat(n.join(" ")," ...")):e},O=function(e){return i.a.createElement("li",null,i.a.createElement("a",{className:"results__link",href:"#".concat(e.result.recipe_id),onClick:e.recipeOnClick},i.a.createElement("figure",{className:"results__fig"},i.a.createElement("img",{src:"".concat(e.result.image_url),alt:"".concat(C(e.result.title))})),i.a.createElement("div",{className:"results__data"},i.a.createElement("h4",{className:"results__name"},"".concat(C(e.result.title))),i.a.createElement("p",{className:"results__author"},"".concat(e.result.publisher)))))},P=function(e){var t=(e.page-1)*e.resPerPage,n=e.page*e.resPerPage;return i.a.createElement("ul",{className:"results__list"},e.searchResult.slice(t,n).map((function(t){return i.a.createElement(O,{result:t,key:t.recipe_id,recipeOnClick:e.recipeOnClick})})))},j=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(g.a)(t).call(this,e))).onPageClick=function(e){n.setState({currentPage:parseInt(e.target.closest(".btn-inline").dataset.goto)})},n.state={currentPage:1,resPerPage:10},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.props.results.length?i.a.createElement("div",{className:"results"},i.a.createElement(P,{searchResult:this.props.results,page:this.state.currentPage,resPerPage:this.state.resPerPage,recipeOnClick:this.props.recipeOnClick}),i.a.createElement(I,{page:this.state.currentPage,numResult:this.props.results.length,resPerPage:this.state.resPerPage,onPageClick:this.onPageClick})):this.props.isPending?i.a.createElement("div",{className:"loader"},i.a.createElement("svg",null,i.a.createElement("use",{href:"img/icons.svg#icon-cw"}))):i.a.createElement("h2",{className:"heading-2"},"No Result")}}]),t}(a.Component),L=Object(k.b)((function(e){return{searchField:e.searchRecipes.searchField,results:e.requestResult.results,isPending:e.requestResult.isPending,error:e.requestResult.error}}),null)(j),w=n(21),T=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).recipeButtonClick=function(e){e.target.matches(".btn-decrease, .btn-decrease *")?n.props.servings>1&&n.updateServings("dec"):e.target.matches(".btn-increase, .btn-increase *")&&n.updateServings("inc")},n.updateServings=function(e){var t,a;t="dec"===e?n.props.servings-1:n.props.servings+1,a=n.props.ingredients.map((function(e){return e.count*=t/n.props.servings,e})),n.props.setRecipeInfo({id:n.props.id,title:n.props.title,author:n.props.author,img:n.props.img,url:n.props.url,ingredients:a,time:n.props.time,servings:t})},n.createIngredient=function(e){return i.a.createElement("li",{className:"recipe__item",key:e.id},i.a.createElement("svg",{className:"recipe__icon"},i.a.createElement("use",{href:"img/icons.svg#icon-check"})),i.a.createElement("div",{className:"recipe__count"},n.formatCount(e.count)),i.a.createElement("div",{className:"recipe__ingredient"},i.a.createElement("span",{className:"recipe__unit"},e.unit),e.ingredient))},n.formatCount=function(e){if(e){var t=Math.round(1e4*e)/1e4,n=e.toString().split(".").map((function(e){return parseInt(e,10)})),a=Object(c.a)(n,2),i=a[0];if(!a[1])return t;if(0===i){var r=new w.Fraction(t);return"".concat(r.numerator,"/").concat(r.denominator)}var s=new w.Fraction(t-i);return"".concat(i," ").concat(s.numerator,"/").concat(s.denominator)}return"?"},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return this.props.id&&0!==this.props.recipe.length?i.a.createElement("div",{className:"recipe",onClick:this.recipeButtonClick},i.a.createElement("figure",{className:"recipe__fig"},i.a.createElement("img",{src:this.props.img,alt:this.props.title,className:"recipe__img"}),i.a.createElement("h1",{className:"recipe__title"},i.a.createElement("span",null,this.props.title))),i.a.createElement("div",{className:"recipe__details"},i.a.createElement("div",{className:"recipe__info"},i.a.createElement("svg",{className:"recipe__info-icon"},i.a.createElement("use",{href:"img/icons.svg#icon-stopwatch"})),i.a.createElement("span",{className:"recipe__info-data recipe__info-data--minutes"},this.props.time),i.a.createElement("span",{className:"recipe__info-text"}," minutes")),i.a.createElement("div",{className:"recipe__info"},i.a.createElement("svg",{className:"recipe__info-icon"},i.a.createElement("use",{href:"img/icons.svg#icon-man"})),i.a.createElement("span",{className:"recipe__info-data recipe__info-data--people"},this.props.servings),i.a.createElement("span",{className:"recipe__info-text"}," servings"),i.a.createElement("div",{className:"recipe__info-buttons"},i.a.createElement("button",{className:"btn-tiny btn-decrease"},i.a.createElement("svg",null,i.a.createElement("use",{href:"img/icons.svg#icon-circle-with-minus"}))),i.a.createElement("button",{className:"btn-tiny btn-increase"},i.a.createElement("svg",null,i.a.createElement("use",{href:"img/icons.svg#icon-circle-with-plus"}))))),i.a.createElement("button",{className:"recipe__love",onClick:this.props.likeButton},i.a.createElement("svg",{className:"header__likes"},i.a.createElement("use",{href:"img/icons.svg#icon-heart".concat(this.props.liked[0]?"":"-outlined")})))),i.a.createElement("div",{className:"recipe__ingredients"},i.a.createElement("ul",{className:"recipe__ingredient-list"},this.props.ingredients.map((function(t){return e.createIngredient(t)}))),i.a.createElement("button",{className:"btn-small recipe__btn--add",onClick:this.props.addToListButton},i.a.createElement("svg",{className:"search__icon"},i.a.createElement("use",{href:"img/icons.svg#icon-shopping-cart"})),i.a.createElement("span",null,"Add to shopping list"))),i.a.createElement("div",{className:"recipe__directions"},i.a.createElement("h2",{className:"heading-2"},"How to cook it"),i.a.createElement("p",{className:"recipe__directions-text"},"This recipe was carefully designed and tested by",i.a.createElement("span",{className:"recipe__by"},this.props.author),". Please check out directions at their website."),i.a.createElement("a",{className:"btn-small recipe__btn",href:this.props.url,target:"_blank",rel:"noopener noreferrer"},i.a.createElement("span",null,"Directions"),i.a.createElement("svg",{className:"search__icon"},i.a.createElement("use",{href:"img/icons.svg#icon-triangle-right"}))))):i.a.createElement("div",{className:"recipe heading-2"},"Nothing")}}]),t}(a.Component),F=Object(k.b)((function(e){return{recipe:e.requestRecipe.recipe,id:e.setRecipeInfo.id,title:e.setRecipeInfo.title,author:e.setRecipeInfo.author,img:e.setRecipeInfo.img,url:e.setRecipeInfo.url,ingredients:e.setRecipeInfo.ingredients,time:e.setRecipeInfo.time,servings:e.setRecipeInfo.servings,likedRecipe:e.setLikedRecipe.likedRecipe}}),{setRecipeInfo:f,setLikedRecipe:v})(T),U=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(g.a)(t).call(this,e))).countUpdate=function(e){var t=e.target.value;t=t>n.props.ingredient.count?e.target.value:n.props.ingredient.count,n.setState({count:t})},n.deleteIng=function(e){n.setState({delete:!0})},n.state={count:n.props.ingredient.count,delete:!1},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.state.delete?i.a.createElement("div",null):i.a.createElement("li",{className:"shopping__item","data-item-id":this.props.ingredient.id},i.a.createElement("div",{className:"shopping__count"},i.a.createElement("input",{type:"number",value:this.state.count,step:this.props.ingredient.count,className:"shopping__count-value",onChange:this.countUpdate}),i.a.createElement("p",null,this.props.ingredient.unit)),i.a.createElement("p",{className:"shopping__description"},this.props.ingredient.ingredient),i.a.createElement("button",{className:"shopping__delete btn-tiny",onClick:this.deleteIng},i.a.createElement("svg",null,i.a.createElement("use",{href:"img/icons.svg#icon-circle-with-cross"}))))}}]),t}(a.Component),x=Object(k.b)((function(e){return{ingredients:e.setRecipeInfo.ingredients}}),null)((function(e){var t=e.shoppingList;return t.length>0?i.a.createElement("div",{className:"shopping"},i.a.createElement("h2",{className:"heading-2"},"My Shopping List"),i.a.createElement("ul",{className:"shopping__list"},t.map((function(e){return i.a.createElement(U,{ingredient:e,key:e.id})})))):i.a.createElement("div",{className:"shopping"},i.a.createElement("h2",{className:"heading-2"},"My Shopping List"),i.a.createElement("ul",{className:"shopping__list"}))})),q=function(){return i.a.createElement("div",{className:"copyright"},"\xa9 by Wei Chieh Lo. Powered by",i.a.createElement("a",{href:"http://food2fork.com",target:"_blank",className:"link",rel:"noopener noreferrer"},"Food2Fork.com"),".")},A=n(15),D=n.n(A),B=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(g.a)(t).call(this,e))).calcTime=function(e){var t=e.length;return 15*Math.ceil(t/3)},n.parseIngredients=function(){var e=["tablespoons","tablespoon","ounces","ounce","oz.","teaspoons","teaspoon","cups","pounds"],t=["tbsp","tbsp","oz","oz","oz","tsp","tsp","cup","pound"],a=[].concat(t,["kg","g"]);return n.props.recipe.ingredients.map((function(n){var i=n.toLowerCase();e.forEach((function(e,n){i=i.replace(e,t[n])}));var r,s=(i=i.replace(/ *\([^)]*\) */g," ").replace(",","")).split(" "),c=s.findIndex((function(e){return a.includes(e)}));if(c>-1){var l;if(1===s.slice(0,c).length)try{l=new Function("return (".concat(s[0].replace("-","+"),")"))()}catch(o){l=1}else try{l=new Function("return (".concat(s.slice(0,c).join("+"),")"))()}catch(p){l=1}r={count:l,unit:s[c],ingredient:s.slice(c+1).join(" "),id:D()()}}else parseInt(s[0],10)?r={count:parseInt(s[0],10),unit:"",ingredient:s.slice(1).join(" "),id:D()()}:-1===c&&(r={count:1,unit:"",ingredient:i,id:D()()});return r}))},n.recipeOnClick=function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.target.closest(".results__link").getAttribute("href").slice(1),n.highlightSelected(t),a.next=4,p.a.awrap(n.props.requestRecipe(t));case 4:n.props.setRecipeInfo({id:t,title:n.props.recipe.title,author:n.props.recipe.publisher,img:n.props.recipe.image_url,url:n.props.recipe.source_url,ingredients:n.parseIngredients(),time:n.calcTime(n.props.recipe.ingredients),servings:4});case 5:case"end":return a.stop()}}))},n.addToListButton=function(){n.setState({list:Object(l.a)(new Set([].concat(Object(l.a)(n.state.list),Object(l.a)(n.props.ingredients))))})},n.liked=function(e,t){var n=[!1,-1];return t.forEach((function(t,a){e===t.id&&(n=[!0,a])})),n[0]?n:[!1,-1]},n.likeButton=function(){var e=n.props.likedRecipe,t=n.liked(n.props.id,n.props.likedRecipe),a=Object(c.a)(t,2),i=a[0],r=a[1];i?(e.splice(r,1),n.props.setLikedRecipe(e)):(e.push({id:n.props.id,img:n.props.img,title:n.props.title,author:n.props.author}),n.props.setLikedRecipe(e)),n.props.likedRecipe.length>0?n.setState({isLike:n.state.isLike+1}):n.setState({isLike:0})},n.likeItemOnClick=function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.target.closest(".likes__link").getAttribute("href").slice(1),n.highlightSelected(t),a.next=4,p.a.awrap(n.props.requestRecipe(t));case 4:n.props.setRecipeInfo({id:t,title:n.props.recipe.title,author:n.props.recipe.publisher,img:n.props.recipe.image_url,url:n.props.recipe.source_url,ingredients:n.parseIngredients(),time:n.calcTime(n.props.recipe.ingredients),servings:4});case 5:case"end":return a.stop()}}))},n.highlightSelected=function(e){Array.from(document.querySelectorAll(".results__link")).forEach((function(e){e.classList.remove("results__link--active")})),document.querySelector('.results__link[href="#'.concat(e,'"]')).classList.add("results__link--active")},n.state={list:[],isLike:0},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=window.location.hash.slice(1))){t.next=5;break}return t.next=4,p.a.awrap(this.props.requestRecipe(e));case 4:this.props.setRecipeInfo({id:e,title:this.props.recipe.title,author:this.props.recipe.publisher,img:this.props.recipe.image_url,url:this.props.recipe.source_url,ingredients:this.parseIngredients(),time:this.calcTime(this.props.recipe.ingredients),servings:4});case 5:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement(y,{isLike:this.state.isLike,likeList:this.state.likeList,likeItemOnClick:this.likeItemOnClick}),i.a.createElement(L,{recipeOnClick:this.recipeOnClick}),i.a.createElement(F,{addToListButton:this.addToListButton,likeButton:this.likeButton,liked:this.liked(this.props.id,this.props.likedRecipe)}),i.a.createElement(x,{shoppingList:this.state.list}),i.a.createElement(q,null))}}]),t}(a.Component),Q=Object(k.b)((function(e){return{recipe:e.requestRecipe.recipe,id:e.setRecipeInfo.id,title:e.setRecipeInfo.title,author:e.setRecipeInfo.author,img:e.setRecipeInfo.img,url:e.setRecipeInfo.url,ingredients:e.setRecipeInfo.ingredients,likedRecipe:e.setLikedRecipe.likedRecipe}}),{requestRecipe:function(e){return function(t){var n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:"REQUEST_RECIPES_PENDING"}),a.prev=1,a.next=4,p.a.awrap(_.a.get("https://forkify-api.herokuapp.com/api/get?rId=".concat(e)));case 4:n=a.sent,t({type:"REQUEST_RECIPES_SUCCESS",payload:n.data.recipe}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),t({type:"REQUEST_RECIPES_FAILED",payload:a.t0});case 11:case"end":return a.stop()}}),null,null,[[1,8]])}},setRecipeInfo:f,setLikedRecipe:v})(B),G=n(12),M=n(34),H=n(35);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=n(4),W={searchField:""},J={isPending:!1,results:[],error:""},K={isPending:!1,recipe:[],error:""},$={id:"",title:"",author:"",img:"",url:"",ingredients:"",time:"",servings:4},V={likedRecipe:[]},X=Object(M.createLogger)(),Y=Object(G.c)({searchRecipes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"CHANGE_SEARCH_FIELD":return Object(z.a)({},e,{searchField:t.payload});default:return e}},requestResult:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"REQUEST_RESULTS_PENDING":return Object(z.a)({},e,{isPending:!0});case"REQUEST_RESULTS_SUCCESS":return Object(z.a)({},e,{results:t.payload,isPending:!1});case"REQUEST_RESULTS_FAILED":return Object(z.a)({},e,{error:t.payload,isPending:!1});default:return e}},requestRecipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"REQUEST_RECIPES_PENDING":return Object(z.a)({},e,{isPending:!0});case"REQUEST_RECIPES_SUCCESS":return Object(z.a)({},e,{recipe:t.payload,isPending:!1});case"REQUEST_RECIPES_FAILED":return Object(z.a)({},e,{error:t.payload,isPending:!1});default:return e}},setRecipeInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_RECIPE_INFO":return Object(z.a)({},e,{id:t.payload.id,title:t.payload.title,author:t.payload.author,img:t.payload.img,url:t.payload.url,ingredients:t.payload.ingredients,time:t.payload.time,servings:t.payload.servings});default:return e}},setLikedRecipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_LIKE_RECIPE":return Object(z.a)({},e,{likedRecipe:t.payload});default:return e}}}),Z=Object(G.d)(Y,Object(G.a)(H.a,X));s.a.render(i.a.createElement(k.a,{store:Z},i.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.e1d97eed.chunk.js.map